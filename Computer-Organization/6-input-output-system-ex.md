# 输入输出系统习题

## 输入输出基本概念

**例题** 在微型机系统中，$I/O$设备通过()与主板的系统总线相连接。

$A.DMA$控制器

$B.$设备控制器

$C.$中断控制器

$D.I/O$端口

解：$B$。$I/O$设备不可能直接与主板总线相连，它总是通过设备控制器来相连的。

## 外部设备

### 输入设备

**例题** 下列关于$I/O$设备的说法中，正确的是()。

Ⅰ.键盘、鼠标、显示器、打印机属于人机交互设备

Ⅱ.在微型计算机中，VGA代表的是视频传输标准

Ⅲ.打印机从打字原理的角度来区分，可分为点阵式打印机和活字式打印机

Ⅳ．鼠标适合于用中断方式来实现输入操作

$A.$Ⅱ、Ⅲ、Ⅳ

$B.$Ⅰ、Ⅱ、Ⅳ

$C.$Ⅰ、Ⅱ、Ⅲ

$D.$Ⅰ、Ⅱ、Ⅲ、Ⅳ

解：$B$。键盘、鼠标、显示器、打印机等都属于机器与人交互的媒介（用户使用键盘、鼠标来控制计算机，计算机使用显示器和打印机来向用户传递信息），因此Ⅰ正确。$VGA$是一个用于显示的视频传输标准，因此Ⅱ正确。打印机从打字原理的角度来分，可分为击打式和非击打式两种，按照能否打出汉字来分，可分为点阵式打印机和活字式打印机，因此Ⅲ错误。键盘、鼠标等输入设备一般都采用中断方式来实现，原因在于$CPU$需要及时响应这些操作，否则容易造成输入的丢失，因此Ⅳ正确。

**例题** $CRT$的分辨率为$1024\times1024$像素，像素的颜色数为$256$，则刷新存储器的每单元字长为()，总容量为()。

$A.8B$，$256MB$

$B.8bit$，$1MB$

$C.8bit$，$256KB$

$D.8B$，$32MB$

解：$B$。刷新存储器中存储单元的字长取决于显示的颜色数，颜色数为$m$，字长为$n$，二者的关系为$2^n=m$。本题中的颜色数为$256=2^8$，因此刷新存储器单元字长为$8$位。刷新存储器的容量是每个像素点的位数和像素点个数的乘积，因此刷新存储器的容量为$1024\times1024\times8bit=1MB$。

### 外存设备

**例题** 若磁盘转速为$7200$转/分，平均寻道时间为$8ms$，每个磁道包含$1000$个扇区，则访问一个扇区的平均存取时间大约是()。

$A.8.1ms$

$B.12.2ms$

$C.16.3ms$

$D.20.5ms$

解：$B$。存取时间=寻道时间＋延迟时间＋传输时间。存取一个扇区的平均延迟时间为旋转半周的时间，即$(60\div7200)\div2=4.17ms$，传输时间为$(60\div7200)\div1000=0.01ms$，因此访问一个扇区的平均存取时间为$4.17+0.01+8=12.18ms$，保留一位小数则为$12.2ms$。

## I/O接口

### I/O总线

**例题** 下列选项中，在$I/O$总线的数据线上传输的信息包括()。

Ⅰ.$I/O$接口中的命令字

Ⅱ.$I/O$接口中的状态字

Ⅲ．中断类型号

$A.$仅Ⅰ、Ⅱ

$B.$仅Ⅰ、Ⅲ

$C.$仅Ⅱ、Ⅲ

$D.$Ⅰ、Ⅱ、Ⅲ

解：$D$。$I/O$总线分为三类：数据线、控制线和地址线。数据缓冲寄存器和命令/状态寄存器的内容都是通过数据线来传送的。地址线用以传送与$CPU$交换数据的端口地址。而控制线用以给IO端口发送读/写信号，只是用来对端口进行读/写控制的。因此Ⅰ、Ⅱ和Ⅲ均正确。

### I/O地址

<!-- #### 统一编制方式 -->

**例题** $I/O$的编址方式采用统一编址方式时，进行输入/输出的操作的指令是()。

$A.$控制指令

$B.$访存指令

$C.$输入/输出指令

$D.$都不对

解：$B$。统一编址时，直接使用指令系统中的访存指令来完成输入/输出操作。独立编址时，则需要使用专门的输入/输出指令来完成输入/输出操作。

### I/O端口

**例题**$I/O$指令实现的数据传送通常发生在()。

$A.I/O$设备和$I/O$端口之间

$B.$通用寄存器和$I/O$设备之间

$C.I/O$端口和$I/O$端口之间

$D.$通用寄存器和$I/O$端口之间

解：$D$。$I/O$端口是指$I/O$接口中用于缓冲信息的寄存器，由于主机和$I/O$设备的工作方式和工作速度有很大差异，$I/O$端口应运而生。在执行一条指令时，$CPU$使用地址总线选择所请求的$I/O$端口，使用数据总线在$CPU$寄存器和端口之间传输数据。

## I/O方式

### 程序查询方式

**例题** 在程序查询方式的输入/输出系统中，假设不考虑处理时间，每一个查询操作需要$100$个时钟周期，$CPU$的时钟频率为$50MHz$。现有鼠标和硬盘两个设备，而且$CPU$必须每秒对鼠标进行$30$次查询，硬盘以$32$位字长为单位传输数据，即每$32$位被$CPU$查询一次，传输率为$2\times2^{20}B/s$。求$CPU$对这两个设备查询所花费的时间比率，由此可得出什么结论？

解：

从时间来看：

因为$CPU$时钟频率为$50MHz$，所以一个时钟周期就是其倒数为$20ns$。

而一个查询操作需要$100$个时钟周期，所以一个查询操作需要$100\times20=2000ns$。

对于鼠标：

每秒需要对鼠标进行$30$次查询，所以一秒内查询鼠标的时间为$30\times2000=60000ns$。

所以查询鼠标所花费的时间比率为$60000ns÷1s=0.006\%$。

从而对鼠标的查询基本上不影响$CPU$性能。

对于硬盘：

因为每$32$位需要查询一次，每秒传送$2\times2^{20}B$，所以每秒需要查询$2\times2^{20}\div4=2^{19}$次。

查询硬盘时间为$2^{19}\times2000=512\times1024\times2000ns\approx1.05\times10^9ns$。

查询硬盘花费时间比率为$105\%$。也就是说即使$CPU$将全部时间都用于对硬盘的查询也不能满足磁盘传输要求。

从频率来看：

$CPU$的时钟频率为$50MHz$，即每秒需要$50\times10^6$个时钟周期。

对于鼠标：

每秒查询鼠标占用时钟周期数为$30×100=3000$，所以查询鼠标花费的时间比率为$3000\div(50\times10^6)=0006\%$。

从而对鼠标的查询基本上不影响$CPU$性能。

对于硬盘：

因为每$32$位需要查询一次，所以每秒需要查询$(2\times2^{20})\div4=2^{19}$次。

所以每秒查询硬盘占用时钟周期数位$2^{19}\times100\approx5.24\times10^7$。

产线硬盘花费时间比例为$(5.24\times10^7)\div(50\times10^6)\approx105\%$。

也就是说即使$CPU$将全部时间都用于对硬盘的查询也不能满足磁盘传输要求。

### 程序中断方式

#### 多重中断技术

**例题** 设某机有$4$个中断源$A$、$B$、$C$、$D$，其硬件排队优先次序为$A>B>C>D$，现要求将中断处理次序改为$D>A>C>B$。

1）写出每个中断源对应的屏蔽字。

解：在写当前中断源屏蔽字时，如果当前中断源的优先级大于屏蔽字，则是$1$，否则是$0$：

中断源|A|B|C|D
:-:|:-:|:-:|:-:|:--:
A|1|1|1|0
B|0|1|0|0
C|0|1|1|0
D|1|1|1|1

如若中断源为$A$，因为$A$必须屏蔽它自己，所以$A$的屏蔽字为$1$，而$A$的优先级大于$B$和$C$，所以$BC$屏蔽字也为$1$，$D$的优先级大于$A$，所以$D$的屏蔽字为$0$。

2）若中断源进入程序如表格。设每个中断源的中断服务程序时间均为$20\mu s$。写出$CPU$执行程序的流程。

中断源|进入程序时间点
:----:|:------------:
B|5
D|10
A|35
C|60

解：首先$B$在时刻$5$进入，开始执行，执行到时刻$10$时$D$进入，而$D$的优先级高于$B$，所以时刻$10$开始执行$D$，时刻$30$此时$D$结束，开始重新执行$B$，直到时刻$35A$进入，此时$B$已经执行了$10$个时间单位，$A$优先级高于$B$，所以$A$开始执行，时刻$55$时$A$完成，$B$开始执行，直到时刻$60$时$C$进入，而$C$优先级大于$B$，所以$C$开始执行，$B$此时已经执行了$15$个单位，$80$时$C$结束，$B$开始，时刻$85$时$B$完成，整个结束。
