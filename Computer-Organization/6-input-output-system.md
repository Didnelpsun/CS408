# 输入输出系统

## 输入输出基本概念

### I/O系统发展

1. 早期，CPU和I/O串行工作，分散连接：
   + 程序查询方式：由CPU通过程序不断查询I/O设备是否已做好准备，从而控制I/O设备与主机交换信息。
2. 接口模块和DMA阶段，CPU和I/O并行工作，总线连接：
   + 中断方式：只在I/O设备准备就绪并向CPU发出中断请求时才予以响应。
   + DMA方式：主存和/O设备之间有一条直接数据通路，当主存和I/O设备交换信息时，无需调用中断服务程序。
3. 具有I/O通道结构，在系统中设有通道控制部件，每个通道都挂接若干外设，主机在执行I/O命令时，只需启动有关通道，通道将执行通道程序，从而完成I/O操作。
4. 具有I/O处理机。

### I/O系统组成

1. I/O软件：
   + 包括驱动程序、用户程序、管理程序、升级补丁等。
   + 通常采用IO指令和通道指令实现CPU和IO设备的信息交换：
   + I/O指令：
     + CPU指令的一部分。
     + 分为操作码（表明识别I/O指令）+命令码（执行的操作）+设备码（操作的设备）。
   + 通道指令通道：
     + 通道自身的指令。
     + 指出数据的首地址、传送字数、操作作命令。
     + 通道指令放在主存中。
     + 由CPU执行启动I/O设备的指令，由通道代替CPU对I/O设备进行管理。
2. I/O硬件：
    + 包括外部设备、设备控制器和接口、I/O总线等。
    + I/O接口+设备控制器+外设。

## 外部设备

+ 外部设备也称外围设备，是除了主机以外的、能直接或间接与计算机交换信息的装置。

### 输入设备

用于向计算机系统输入命令和文本、数据等信息的部件。键盘和鼠标是最基本的输入设备。
  
#### 键盘

+ 键盘是最常用的输入设备，通过它可发出命令或输入数据。
+ 键盘通常以矩阵的形式排列按键，每个键用符号标明它的含义和作用。
+ 每个键相当于一个开关，当按下键时，电信号连通；当松开键时，弹簧把键弹起，电信号断开。
+ 键盘输入信息可分为3个步骤：
  1. 查出按下的是哪个键。
  2. 将该键翻译成能被主机接收的编码，如ASCII码。
  3. 将编码传送给主机。

#### 鼠标

+ 鼠标是常用的定位输入设备，它把用户的操作与计算机屏幕上的位置信息相联系。
+ 常用的鼠标有机械式和光电式两种。
+ 工作原理：当鼠标在平面上移动时，其底部传感器把运动的方向和距离检测出来，从而控制光标做相应运动。

### 输出设备

用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。显示器和打印机是最基本的输出设备。

#### 显示器

+ 按显示设备所用的显示器件分类：
  + 阴极射线管（CRT）显示器：CRT显示器主要由电子枪、偏转线圈、荫罩、高压石墨电极和荧光粉涂层及玻璃外壳5部分组成。具有可视角度大、无坏点、色彩还原度高、色度均匀、可调节的多分辨率模式、响应时间极短等目前LCD难以超过的优点。
  + 液晶显示器（LCD）：利用液晶的电光效应，由图像信号电压直接控制薄膜晶体管,再间接控制液品分子的光学特性来实现图像的显示。特点:体积小、重量轻、省电、无辐射、绿色环保、画面柔、不伤眼等。
  + LED显示器：通过控制半导体发光二极管进行显示，用来显示文字、图形、图像等各种信息。
  + LCD、LED是两种不同的显示技术，LCD是由液态晶体组成的显示屏，而LED则是由发光二极管组成的显示屏。与LCD相比，LED显示器在亮度、功耗、可视角度和刷新速率等方面都更具优势。
+ 按所显示的信息内容分类：
  + 字符显示器：
    + 显示字符的方法以点阵为基础。点阵是指由m×n个点组成的阵列。点阵的多少取决于显示字符的质量和字符窗口的大小。字符窗口是指每个字符在屏幕上所占的点数，它包括字符显示点阵和字符间隔。
    + 将点阵存入由ROM构成的字符发生器中，在CRT进行光栅扫描的过程中，从字符发生器中依次读出某个字符的点阵，按照点阵中0和1代码不同控制扫描电子束的开或关，从而在屏幕上显示出字符。对应于每个字符窗口，所需显示字符的ASCII代码被存放在视频存储器VRAM中，以备刷新。
    + 按扫描方式不同可分为：光栅扫描显示器、随机扫描显示器。
  + 图形显示器：
    + 将所显示图形的一组坐标点和绘图命令组成显示文件存放在缓冲存储器中，缓存中的显示文件传送给矢量（线段）产生器，产生相应的模拟电压，直接控制电子束在屏幕上的移动。为了在屏幕上保留持久稳定的图像，需要按一定的频率对屏幕进行反复刷新。
    + 这种显示器的优点是分辨率高且显示的曲线平滑。目前高质量的图形显示器采用这种随机扫描方式。
    + 缺点是当显示复杂图形时，会有闪烁感。
  + 图像显示器。
+ 屏幕大小：以对角线长度表示，常用的有12～29英寸等。
+ 分辨率：所能表示的像素个数，屏幕上的每一个光点就是一个像素，以宽、高的像素的乘积表示，例如，800×600、1024×768和1280×1024等。
+ 灰度级：指黑白显示器中所显示的像素点的亮暗差别，在彩色显示器中则表现为颜色的不同，灰度级越多，图像层次越清楚逼真，典型的有8位（256级）、16位等。$n$位可以表示$2^n$种不同的亮度或颜色。
+ 刷新：光点只能保持极短的时间便会消失，为此必须在光点消失之前再重新扫描显示一遍，这个过程称为刷新。
+ 刷新频率：单位时间内扫描整个屏幕内容的次数，按照人的视觉生理，刷新频率大于30Hz时才不会感到闪烁，通常显示器刷新频率在60到120Hz。
+ 显示存储器（VRAM）：也称刷新存储器，为了不断提高刷新图像的信号，必须把一帧图像信息存储在刷新存储器中。其存储容量由图像分辨率和灰度级决定，分辨率越高，灰度级越多，刷新存储器容量越大。
  + VRAM容量=分辨率×灰度级位数。
  + VRAM带宽=分辨率×灰度级位数×帧频。

#### 打印机

+ 打印机是计算机的输出设备之一，用于将计算机处理结果打印在相关介质上。
+ 按印字原理不同可分为：
  + 击打式打印机：
    + 利用机械动作使印字机构与色带和纸相撞而打印字符。
    + 优点：设备成本低；印字质量好。
    + 缺点：噪声大；速度慢。
  + 非击打式打印机:
    + 采用电、磁、光、喷墨等物理、化学方法来印刷字符。
    + 优点：速度快；噪声小。
    + 缺点：成本高。
+ 按打印机工作方式不同可分为：
  + 串行打印机：
    + 逐字打印。
    + 速度慢。
  + 行式打印机：
    + 逐行打印。
    + 速度快。
+ 按工作方式可分为：
  + 针式打印机：
    + 原理：在联机状态下，主机发出打印命令，经接口、检测和控制电路，间歇驱动纵向送纸和打印头横向移动，同时驱动打印机间歇冲击色带，在纸上打印出所需内容。
    + 特点：针式打印机擅长“多层复写打印”，实现各种票据或蜡纸等的打印。它工作原理简单，造价低廉，耗材（色带）便宜，但打印分辨率和打印速度不够。
  + 喷墨式打印机：
    + 原理：带电的喷墨雾点经过电极偏转后，直接在纸上形成所需字形。彩色喷墨打印机基于三基色原理，即分别喷射3种颜色墨滴，按一定的比例混合出所要求的颜色。
    + 特点：打印噪声小，可实现高质量彩色打印，通常打印速度比针式打印机快；但防水性差，高质量打印需要专用打印纸。
  + 激光打印机：
    + 原理：计算机输出的二进制信息，经过调制后的激光束扫描，在感光鼓上形成潜像，再经过显影、转印和定影，便在纸上得到所需的字符或图像。
    + 特点：打印质量高、速度快、噪声小、处理能力强；但耗材多、价格较贵、不能复写打印多份，且对纸张的要求高。激光打印机是将激光技术和电子显像技术相结合的产物。感光鼓（也称为硒鼓)是激光打印机的核心部件。

### 外存设备

+ 是指除计算机内存及CPU缓存等以外的存储器。硬磁盘、光盘等是最基本的外存设备。
+ 计算机的外存储器又称为辅助存储器，目前主要使用磁表面存储器。
+ 所谓“磁表面存储”，是指把某些磁性材料薄薄地涂在金属铝或塑料表面上作为载磁体来存储信息。磁盘存储器、磁带存储器和磁鼓存储器均属于磁表面存储器。
+ 磁表面存储器的优点:
  1. 存储容量大，位价格低。
  2. 记录介质可以重复使用。
  3. 记录信息可以长期保存而不丢失，甚至可以脱机存档。
  4. 非破坏性读出，读出时不需要再生。
+ 磁表面存储器的缺点:
  1. 存取速度慢。
  2. 机械结构复杂。
  3. 对工作环境要求较高。
+ 原理：当磁头和磁性记录介质有相对运动时，通过电磁转换完成读/写操作。
+ 编码方法：按某种方案（规律），把一连串的二进制信息变换成存储介质磁层中一个磁化翻转状态的序列，并使读/写控制电路容易、可靠地实现转换。
+ 磁记录方式：通常采用调频制（FM）和改进型调频制（MFM）的记录方式。

#### 磁盘存储器

+ 磁盘设备的组成：
  + 存储区域：一块硬盘含有若干个记录面，每个记录面划分为若干条磁道，而每条磁道又划分为若干个扇区，扇区（也称块）是磁盘读写的最小单位，也就是说磁盘按块存取。
    + 磁头数（Heads）：即记录面数，表示硬盘总共有多少个磁头，磁头用于读取/写入盘片上记录面的信息，一个记录面对应一个磁头。
    + 柱面数（Cylinders）：表示硬盘每一面盘片上有多少条，一个盘组中，不同记录面的相同编号（位置）的诸磁道构成一个圆柱面。
    + 扇区数（Sectors）：表示每一条磁道上有多少个扇区。
  + 硬盘存储器：
    + 硬盘存储器由磁盘驱动器、磁盘控制器和盘片组成。
    + 磁盘驱动器：核心部件是磁头组件和盘片组件，温彻斯特盘是一种可移动头固定盘片的硬盘存储器。
    + 磁盘控制器：是硬盘存储器和主机的接口，主流的标准有IDE、SCSI、SATA等。
+ 磁盘的性能指标：
  + 磁盘容量：一个磁盘所能存储的字节总数称为磁盘容量。
    + 非格式化容量是指磁记录表面可以利用的磁化单元总数。
    + 格式化容量是指按照某种特定的记录格式所能存储信息的总量。
  + 记录密度：指盘片单位面积上记录的二进制的信息量。
    + 道密度：沿磁盘半径方向单位长度上的磁道数。
    + 位密度：磁道单位长度上能记录的二进制代码位数。
    + 面密度：位密度和道密度的乘积。



## I/O接口

## I/O方式